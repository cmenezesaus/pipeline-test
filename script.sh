#!/bin/bash

# Jenkins URL and CLI JAR location
JENKINS_URL="http://18.231.161.233:8080/"
JENKINS_CLI_JAR="./jenkins-cli.jar"

# Download jenkins-cli.jar
wget http://18.231.161.233:8080/jnlpJars/jenkins-cli.jar

# Auth
java -jar ./jenkins-cli.jar -s http://18.231.161.233:8080/  -auth $JENKINS_USR:$JENKINS_PASS who-am-i

# List of plugins to install
PLUGINS=("https://updates.jenkins.io/download/plugins/branch-api/1.11.1/branch-api.hpi" "https://updates.jenkins.io/download/plugins/build-timeout/1.18/build-timeout.hpi" "https://updates.jenkins.io/download/plugins/built-on-column/1.1/built-on-column.hpi" "https://updates.jenkins.io/download/plugins/cloudbees-folder/5.13/cloudbees-folder.hpi" "https://updates.jenkins.io/download/plugins/command-launcher/1.2/command-launcher.hpi" "https://updates.jenkins.io/download/plugins/conditional-buildstep/1.3.6/conditional-buildstep.hpi" "https://updates.jenkins.io/download/plugins/credentials-binding/1.15/credentials-binding.hpi" "https://updates.jenkins.io/download/plugins/credentials/2.1.18/credentials.hpi" "https://updates.jenkins.io/download/plugins/custom-tools-plugin/0.4.4/custom-tools-plugin.hpi" "https://updates.jenkins.io/download/plugins/cvs/2.11/cvs.hpi" "https://updates.jenkins.io/download/plugins/dashboard-view/2.9.11/dashboard-view.hpi" "https://updates.jenkins.io/download/plugins/display-url-api/2.0/display-url-api.hpi" "https://updates.jenkins.io/download/plugins/docker-commons/1.14/docker-commons.hpi" "https://updates.jenkins.io/download/plugins/durable-task/1.22/durable-task.hpi" "https://updates.jenkins.io/download/plugins/ec2/1.39/ec2.hpi" "https://updates.jenkins.io/download/plugins/ace-editor/1.1/ace-editor.hpi" "https://updates.jenkins.io/download/plugins/analysis-core/1.80/analysis-core.hpi" "https://updates.jenkins.io/download/plugins/ansicolor/0.5.2/ansicolor.hpi" "https://updates.jenkins.io/download/plugins/antisamy-markup-formatter/1.5/antisamy-markup-formatter.hpi" "https://updates.jenkins.io/download/plugins/ant/1.2/ant.hpi" "https://updates.jenkins.io/download/plugins/apache-httpcomponents-client-4-api/4.5.3-2.1/apache-httpcomponents-client-4-api.hpi" "https://updates.jenkins.io/download/plugins/authentication-tokens/1.3/authentication-tokens.hpi" "https://updates.jenkins.io/download/plugins/aws-credentials/1.21/aws-credentials.hpi" "https://updates.jenkins.io/download/plugins/bouncycastle-api/2.16.0/bouncycastle-api.hpi" "https://updates.jenkins.io/download/plugins/envinject-api/1.4/envinject-api.hpi" "https://updates.jenkins.io/download/plugins/external-monitor-job/1.4/external-monitor-job.hpi" "https://updates.jenkins.io/download/plugins/findbugs/4.69/findbugs.hpi" "https://updates.jenkins.io/download/plugins/ghprb/1.33.2/ghprb.hpi" "https://updates.jenkins.io/download/plugins/git-client/2.7.1/git-client.hpi" "https://updates.jenkins.io/download/plugins/github-api/1.90/github-api.hpi" "https://updates.jenkins.io/download/plugins/github-branch-source/1.10/github-branch-source.hpi" "https://updates.jenkins.io/download/plugins/github/1.28.1/github.hpi" "https://updates.jenkins.io/download/plugins/github-organization-folder/1.5/github-organization-folder.hpi" "https://updates.jenkins.io/download/plugins/git/3.8.0/git.hpi" "https://updates.jenkins.io/download/plugins/git-server/1.7/git-server.hpi" "https://updates.jenkins.io/download/plugins/global-post-script/1.1.3/global-post-script.hpi" "https://updates.jenkins.io/download/plugins/groovy/2.0/groovy.hpi" "https://updates.jenkins.io/download/plugins/handlebars/1.1.1/handlebars.hpi" "https://updates.jenkins.io/download/plugins/hipchat/0.1.9/hipchat.hpi" "https://updates.jenkins.io/download/plugins/icon-shim/2.0.3/icon-shim.hpi" "https://updates.jenkins.io/download/plugins/jackson2-api/2.9.7.1/jackson2-api.hpi" "https://updates.jenkins.io/download/plugins/jacoco/3.0.3/jacoco.hpi" "https://updates.jenkins.io/download/plugins/javadoc/1.0/javadoc.hpi" "https://updates.jenkins.io/download/plugins/jenkins-multijob-plugin/1.16/jenkins-multijob-plugin.hpi" "https://updates.jenkins.io/download/plugins/jquery-detached/1.2.1/jquery-detached.hpi" "https://updates.jenkins.io/download/plugins/jquery/1.11.2-0/jquery.hpi" "https://updates.jenkins.io/download/plugins/jsch/0.1.54.2/jsch.hpi" "https://updates.jenkins.io/download/plugins/junit/1.24/junit.hpi" "https://updates.jenkins.io/download/plugins/ldap/1.14/ldap.hpi" "https://updates.jenkins.io/download/plugins/leastload/2.0.1/leastload.hpi" "https://updates.jenkins.io/download/plugins/mailer/1.20/mailer.hpi" "https://updates.jenkins.io/download/plugins/mapdb-api/1.0.9.0/mapdb-api.hpi" "https://updates.jenkins.io/download/plugins/mask-passwords/2.10.1/mask-passwords.hpi" "https://updates.jenkins.io/download/plugins/matrix-auth/1.7/matrix-auth.hpi" "https://updates.jenkins.io/download/plugins/matrix-project/1.12/matrix-project.hpi" "https://updates.jenkins.io/download/plugins/maven-plugin/2.17/maven-plugin.hpi" "https://updates.jenkins.io/download/plugins/momentjs/1.1.1/momentjs.hpi" "https://updates.jenkins.io/download/plugins/monitoring/1.91.0/monitoring.hpi" "https://updates.jenkins.io/download/plugins/multiple-scms/0.6/multiple-scms.hpi" "https://updates.jenkins.io/download/plugins/node-iterator-api/1.5.0/node-iterator-api.hpi" "https://updates.jenkins.io/download/plugins/pam-auth/1.1/pam-auth.hpi" "https://updates.jenkins.io/download/plugins/parameterized-trigger/2.35.2/parameterized-trigger.hpi" "https://updates.jenkins.io/download/plugins/pegdown-formatter/1.3/pegdown-formatter.hpi" "https://updates.jenkins.io/download/plugins/pipeline-build-step/2.3/pipeline-build-step.hpi" "https://updates.jenkins.io/download/plugins/pipeline-graph-analysis/1.2/pipeline-graph-analysis.hpi" "https://updates.jenkins.io/download/plugins/pipeline-input-step/2.3/pipeline-input-step.hpi" "https://updates.jenkins.io/download/plugins/pipeline-milestone-step/1.1/pipeline-milestone-step.hpi" "https://updates.jenkins.io/download/plugins/pipeline-rest-api/2.2/pipeline-rest-api.hpi" "https://updates.jenkins.io/download/plugins/pipeline-stage-step/2.2/pipeline-stage-step.hpi" "https://updates.jenkins.io/download/plugins/pipeline-stage-view/2.2/pipeline-stage-view.hpi" "https://updates.jenkins.io/download/plugins/plain-credentials/1.4/plain-credentials.hpi" "https://updates.jenkins.io/download/plugins/preSCMbuildstep/0.3/preSCMbuildstep.hpi" "https://updates.jenkins.io/download/plugins/rapid7-insightvm-container-assessment/1.0.5/rapid7-insightvm-container-assessment.hpi" "https://updates.jenkins.io/download/plugins/rebuild/1.25/rebuild.hpi" "https://updates.jenkins.io/download/plugins/run-condition/1.0/run-condition.hpi" "https://updates.jenkins.io/download/plugins/scm-api/2.2.6/scm-api.hpi" "https://updates.jenkins.io/download/plugins/script-security/1.54/script-security.hpi" "https://updates.jenkins.io/download/plugins/slack/2.0.1/slack.hpi" "https://updates.jenkins.io/download/plugins/ssh-agent/1.7/ssh-agent.hpi" "https://updates.jenkins.io/download/plugins/ssh-credentials/1.14/ssh-credentials.hpi" "https://updates.jenkins.io/download/plugins/ssh-slaves/1.29.4/ssh-slaves.hpi" "https://updates.jenkins.io/download/plugins/startup-trigger-plugin/2.7/startup-trigger-plugin.hpi" "https://updates.jenkins.io/download/plugins/structs/1.10/structs.hpi" "https://updates.jenkins.io/download/plugins/subversion/2.9/subversion.hpi" "https://updates.jenkins.io/download/plugins/timestamper/1.8.9/timestamper.hpi" "https://updates.jenkins.io/download/plugins/token-macro/2.1/token-macro.hpi" "https://updates.jenkins.io/download/plugins/translation/1.10/translation.hpi" "https://updates.jenkins.io/download/plugins/windows-slaves/1.0/windows-slaves.hpi" "https://updates.jenkins.io/download/plugins/workflow-aggregator/2.4/workflow-aggregator.hpi" "https://updates.jenkins.io/download/plugins/workflow-api/2.24/workflow-api.hpi" "https://updates.jenkins.io/download/plugins/workflow-basic-steps/2.3/workflow-basic-steps.hpi" "https://updates.jenkins.io/download/plugins/workflow-cps-global-lib/2.4/workflow-cps-global-lib.hpi" "https://updates.jenkins.io/download/plugins/workflow-cps/2.28/workflow-cps.hpi" "https://updates.jenkins.io/download/plugins/workflow-durable-task-step/2.16/workflow-durable-task-step.hpi" "https://updates.jenkins.io/download/plugins/workflow-job/2.8/workflow-job.hpi" "https://updates.jenkins.io/download/plugins/workflow-multibranch/2.9/workflow-multibranch.hpi" "https://updates.jenkins.io/download/plugins/workflow-scm-step/2.2/workflow-scm-step.hpi" "https://updates.jenkins.io/download/plugins/workflow-step-api/2.12/workflow-step-api.hpi" "https://updates.jenkins.io/download/plugins/workflow-support/2.14/workflow-support.hpi" "https://updates.jenkins.io/download/plugins/aws-java-sdk/1.11.264/aws-java-sdk.hpi" "https://updates.jenkins.io/download/plugins/aws-java-sdk/1.11.264/aws-java-sdk.hpi" "https://updates.jenkins.io/download/plugins/extended-choice-parameter/0.75/extended-choice-parameter.hpi" "https://updates.jenkins.io/download/plugins/envinject-api/1.4/envinject-api.hpi")

# Loop through the plugins and install them
for PLUGIN in "${PLUGINS[@]}"
do
    java -jar $JENKINS_CLI_JAR -s $JENKINS_URL -auth $JENKINS_USR:$JENKINS_PASS install-plugin $PLUGIN 
done

# Restart Jenkins to apply changes
java -jar ./jenkins-cli.jar -s http://18.231.161.233:8080/ -auth $JENKINS_USR:$JENKINS_PASS safe-restart 


